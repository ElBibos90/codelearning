
> codelearning@1.0.0 test
> node --experimental-vm-modules node_modules/jest/bin/jest.js --no-cache tests/services/FavoriteService.test.js

(node:2408) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL tests/services/FavoriteService.test.js
  Test Environment
    √ should have correct test environment variables (4 ms)
    √ should mock console.error and console.warn (2 ms)
  FavoriteService
    Favorite Management
      √ should add course to favorites (8 ms)
      √ should prevent duplicate favorites (5 ms)
      √ should get user favorites (3 ms)
      √ should update favorite notes (3 ms)
      √ should check if course is favorite (3 ms)
    Favorite Removal
      √ should remove from favorites (6 ms)
      √ should fail removing non-existent favorite (2 ms)
    Favorite Statistics
      × should get course favorite stats (6 ms)
    Validation
      √ should validate required fields (2 ms)
      √ should require courseId (1 ms)
      √ should require userId (1 ms)
      √ should sanitize notes (130 ms)

  ● FavoriteService › Favorite Statistics › should get course favorite stats

    DatabaseError: Failed to fetch favorite statistics

    [0m [90m 123 |[39m             }[33m;[39m
     [90m 124 |[39m         } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 125 |[39m             [36mthrow[39m [36mnew[39m [33mDatabaseError[39m([32m'Failed to fetch favorite statistics'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 126 |[39m         }
     [90m 127 |[39m     }
     [90m 128 |[39m }[0m

      at FavoriteService.getFavoriteStats (src/services/FavoriteService.js:125:19)
      at Object.<anonymous> (tests/services/FavoriteService.test.js:159:27)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 13 passed, 14 total
Snapshots:   0 total
Time:        1.219 s
Ran all test suites matching /tests\\services\\FavoriteService.test.js/i.
