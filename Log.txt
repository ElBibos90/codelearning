
> codelearning@1.0.0 test
> node --experimental-vm-modules node_modules/jest/bin/jest.js --no-cache tests/services/EnrollmentService.test.js

(node:31816) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL tests/services/EnrollmentService.test.js
  Test Environment
    âˆš should have correct test environment variables (4 ms)
    âˆš should mock console.error and console.warn (1 ms)
  EnrollmentService
    Enrollment Management
      âˆš should enroll user in course (8 ms)
      âˆš should prevent duplicate enrollment (3 ms)
      âˆš should get user enrollments (5 ms)
      âˆš should get course enrollments (2 ms)
    Progress Tracking
      âˆš should complete course enrollment (3 ms)
      âˆš should get enrollment statistics (2 ms)
    Enrollment Removal
      âˆš should unenroll user from course (3 ms)
      âˆš should handle unenroll from non-existent enrollment (4 ms)
    Validation
      Ã— should validate enrollment data (4 ms)
      âˆš should require userId (5 ms)
      âˆš should require courseId (39 ms)

  â— EnrollmentService â€º Validation â€º should validate enrollment data

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"completed": false, "completed_at": null, "course_id": null, "enrolled_at": 2024-12-03T19:57:27.965Z, "id": 88, "user_id": null}

    [0m [90m  99 |[39m     describe([32m'Validation'[39m[33m,[39m () [33m=>[39m {
     [90m 100 |[39m         test([32m'should validate enrollment data'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 101 |[39m             [36mawait[39m expect(
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 102 |[39m                 [33mEnrollmentService[39m[33m.[39mcreate({})
     [90m 103 |[39m             )[33m.[39mrejects[33m.[39mtoThrow([32m'Enrollment validation failed'[39m)[33m;[39m
     [90m 104 |[39m         })[33m;[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/services/EnrollmentService.test.js:101:19)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 12 passed, 13 total
Snapshots:   0 total
Time:        1.111 s
Ran all test suites matching /tests\\services\\EnrollmentService.test.js/i.
